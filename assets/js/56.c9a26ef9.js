(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{550:function(e,t,a){"use strict";a.r(t);var r=a(26),o=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"btcpay-wallet-faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-wallet-faq"}},[e._v("#")]),e._v(" BTCPay Wallet FAQ")]),e._v(" "),a("p",[e._v("This document contains frequently asked questions and solutions to common issues regarding internal or external wallets you're using with or within BTCPay.")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#what-is-btcpay-wallet"}},[e._v("What is BTCPay wallet")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#what-is-wallet-re-scan-in-btcpay"}},[e._v("What is wallet re-scan in BTCPay?")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#recommended-external-wallets"}},[e._v("Recommended external wallets")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#how-to-connect-my-wallet-to-btcpay-server"}},[e._v("How to connect my wallet")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#missing-payments-in-my-software-or-hardware-wallet"}},[e._v("Missing payments in wallet")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#receiving-address-in-zap-and-electrum-is-different"}},[e._v("Electrum and Zap show different addresses")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#can-i-see-my-payments-on-mobile"}},[e._v("How to see payments on a mobile device")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#what-is-a-derivation-scheme"}},[e._v("What is a derivation scheme?")])])]),e._v(" "),a("h2",{attrs:{id:"what-is-btcpay-wallet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-btcpay-wallet"}},[e._v("#")]),e._v(" What is BTCPay wallet?")]),e._v(" "),a("p",[e._v("BTCPay has an internal wallet which you can use to see the transactions and even send the money out of it. The wallet works only with a supported hardware wallet, like Ledger Nano S.")]),e._v(" "),a("p",[e._v("You'll have to confirm and sign the transaction on your hardware wallet. BTCPay wallet is not a hot wallet. The private keys are secured inside your hardware wallet.")]),e._v(" "),a("h2",{attrs:{id:"what-is-wallet-re-scan-in-btcpay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-wallet-re-scan-in-btcpay"}},[e._v("#")]),e._v(" What is wallet re-scan in BTCPay?")]),e._v(" "),a("p",[e._v("The Rescan feature is best explained in a real-life situation:")]),e._v(" "),a("ul",[a("li",[e._v("You use a wallet outside of BTCPay (for example Ledger Nano S with the Ledger Live app)")]),e._v(" "),a("li",[e._v("You receive a payment worth 1BTC to your Nano S wallet.")]),e._v(" "),a("li",[e._v("After a while you decide to add the xpubkey you use with your Ledger to your BTCPay Server. You add this xpub as a derivation scheme in your Store.")]),e._v(" "),a("li",[e._v("You then find out that BTCPay has no information about transaction A, and shows 0 BTC balance while Ledger Live shows 1BTC.")])]),e._v(" "),a("p",[e._v("This happens because when you use a new derivation scheme with your store, BTCPay Server doesn't know the past transactions of your wallet.")]),e._v(" "),a("p",[e._v("To solve this issue, you need to use the "),a("strong",[e._v("Rescan feature")]),e._v(". The Rescan relies on Bitcoin Core 0.17.0's "),a("a",{attrs:{href:"https://bitcoincore.org/en/doc/0.17.0/rpc/blockchain/scantxoutset/",target:"_blank",rel:"noopener noreferrer"}},[e._v("scantxoutset"),a("OutboundLink")],1),e._v(" to scan the current state of the blockchain (called UTXO Set) for coins belonging to your derivation scheme.\nOnce the scan is complete, BTCPay Server will show the correct balance, along with some of past transactions of your wallet.")]),e._v(" "),a("h2",{attrs:{id:"recommended-external-wallets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#recommended-external-wallets"}},[e._v("#")]),e._v(" Recommended external wallets?")]),e._v(" "),a("p",[e._v("We highly recommend you to use an internal wallet in case you need to double-check the transaction. If you wish to use an external wallet, here are our recomendations:")]),e._v(" "),a("ul",[a("li",[e._v("Electrum - desktop wallet")]),e._v(" "),a("li",[e._v("Ledger Nano S - hardware wallet (other hardware wallets should be added at some point)")]),e._v(" "),a("li",[e._v("Zap - Lightning Network LND wallet")]),e._v(" "),a("li",[e._v("Spark - Lightning Network c-lightning wallet")]),e._v(" "),a("li",[e._v("Sentinel - Watch-only on-chain wallet for Android")]),e._v(" "),a("li",[e._v("ArcBit / bitWallet - Watch-only on-chain wallet for Android")])]),e._v(" "),a("h2",{attrs:{id:"how-to-connect-my-wallet-to-btcpay-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-connect-my-wallet-to-btcpay-server"}},[e._v("#")]),e._v(" How to connect my wallet to BTCPay Server?")]),e._v(" "),a("p",[e._v("The process of connecting a wallet to your BTCPay server is the same for both third-party or self-hosted deployments. Your private keys are never uploaded nor required by the BTCPay Server. You’re only uploading the xpubkey.")]),e._v(" "),a("p",[e._v("There are two ways to connect your BTCPay and your wallet:")]),e._v(" "),a("ol",[a("li",[e._v("Automatic with Ledger Nano S hardware wallet")]),e._v(" "),a("li",[e._v("Manual with any wallet supporting xpubkey (Electrum highly recommended)")])]),e._v(" "),a("p",[e._v("Watch the video below or read "),a("a",{attrs:{href:"https://bitcoinshirt.co/how-to-create-store-accept-bitcoin/8/#Connecting-BTCPay-with-your-wallet",target:"_blank",rel:"noopener noreferrer"}},[e._v("this article"),a("OutboundLink")],1),e._v(" for step by step instructions.")]),e._v(" "),a("a",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/xX6LyQej0NQ/hqdefault.jpg)"},attrs:{href:"https://www.youtube.com/watch?v=xX6LyQej0NQ","data-id":"xX6LyQej0NQ"}},[a("iframe",{attrs:{title:"YouTube: BTCPay Server - Connecting Wallet","data-src":"https://www.youtube-nocookie.com/embed/xX6LyQej0NQ?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),e._v(" "),a("h2",{attrs:{id:"missing-payments-in-my-software-or-hardware-wallet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#missing-payments-in-my-software-or-hardware-wallet"}},[e._v("#")]),e._v(" Missing payments in my software or hardware wallet")]),e._v(" "),a("p",[e._v("If your internal BTCPay wallet is showing the transactions and you do not see the funds on your desktop, mobile or hardware wallet, you need to "),a("strong",[e._v("increase the gap limit")]),e._v(" of the external wallet you're using. Do not worry, your funds are safe, they're just not showing yet.")]),e._v(" "),a("p",[e._v("Most wallets, have a gap limit of 20. This means that after 20 consecutive unpaid invoices, wallet will stop fetching the transactions beyond that and won't show them. The solution is to increase the gap limit. Not all wallets have this feature.")]),e._v(" "),a("p",[e._v("For that reason, it's highly recommended that you use "),a("a",{attrs:{href:"https://electrum.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Electrum wallet"),a("OutboundLink")],1),e._v(". To set increase the gap limit in Electrum, "),a("a",{attrs:{href:"https://www.youtube.com/watch?v=Fi3pYpzGmmo",target:"_blank",rel:"noopener noreferrer"}},[e._v("follow this video"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("Enter following commands in Electrum console:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" wallet.change_gap_limit(100)\n wallet.storage.write()\n")])])]),a("p",[e._v("Restart your Electrum and verify that the newly set gap limit is correct by entering:")]),e._v(" "),a("p",[a("code",[e._v("wallet.gap_limit")])]),e._v(" "),a("p",[e._v("There's no good answer to how much you should set the gap limit to. Most merchants set 100-200. If you're a big merchants with high transaction volume, you can try with an even higher gap limit.")]),e._v(" "),a("p",[e._v("Be aware that :")]),e._v(" "),a("ul",[a("li",[e._v("A higher gap limit may slow down the performance of your wallet")]),e._v(" "),a("li",[e._v("Not all wallets support the increased gap limit. If you import an Electrum recovery seed into another wallet, you may not see all the funds again.")])]),e._v(" "),a("p",[e._v("When an invoice is created in BTCPay, it does it for all coins you have setup. You may want to increase the gap limit for altcoins as well in their supported wallets.")]),e._v(" "),a("p",[e._v("If you do not see your funds yet, you may have set up your derivation scheme incorrectly.")]),e._v(" "),a("h2",{attrs:{id:"why-is-my-ledger-not-detected-by-btcpay-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-is-my-ledger-not-detected-by-btcpay-server"}},[e._v("#")]),e._v(" Why is my Ledger not detected by BTCPay Server?")]),e._v(" "),a("p",[e._v("Check that you are running the Ledger app with a version equal or above 1.2.4. Make sure to use Google Chrome. Plug your Ledger Nano S into your PC. Enter the PIN, and select the coin wallet app, for example > Bitcoin. Try refreshing the browser.")]),e._v(" "),a("p",[e._v("If the problem persists, contact the owner of the BTCPay Server: The reverse proxy of the BTCPay server hosting BTCPay might not support Websockets.")]),e._v(" "),a("p",[e._v('To confirm this is the issue, create a new invoice and go on its checkout page, you can also go on your store\'s "Wallet" page.\nYou should then see this error in the Javascript console:')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("WebSocket connection to ‘wss://pay.example.com/i/4yhCmpWxJcHfVG3rV4EmEu/status/ws’ failed: Error during WebSocket handshake: Unexpected response code: 404\n")])])]),a("p",[e._v("To fix the situation, if your reverse proxy is nginx, make sure that the following is included at the top of "),a("code",[e._v("/etc/nginx/conf.d/default.conf")]),e._v(" :")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# If we receive Upgrade, set Connection to \"upgrade\"; otherwise, delete any\n# Connection header that may have been passed to this server\nmap $http_upgrade $proxy_connection {\n  default upgrade;\n  '' close;\n}\nproxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection $proxy_connection;\n")])])]),a("p",[e._v("Then restart nginx.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("/etc/init.d/nginx reload\n")])])]),a("h2",{attrs:{id:"receiving-address-in-zap-and-electrum-is-different"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#receiving-address-in-zap-and-electrum-is-different"}},[e._v("#")]),e._v(" Receiving address in Zap and Electrum is different?")]),e._v(" "),a("p",[e._v("Zap and Electrum are two different wallets. Zap is for "),a("RouterLink",{attrs:{to:"/FAQ/LightningNetwork.html"}},[e._v("Lightning Network")]),e._v(" and Electrum is for on-chain transactions. They are unrelated and use different private keys. Use Electrum or internal BTCPay wallet to check your on-chain payments and Zap for your Lightning Network payments.")],1),e._v(" "),a("p",[e._v("In the future, there will be wallets merging both on-chain and off-chain transactions into one, but for now, you have to use them separately.")]),e._v(" "),a("h2",{attrs:{id:"can-i-see-my-payments-on-mobile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#can-i-see-my-payments-on-mobile"}},[e._v("#")]),e._v(" Can I see my payments on mobile?")]),e._v(" "),a("p",[e._v("If you wish to follow your on-chain payments on a mobile device, you can use a watch-only wallet like "),a("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.samourai.sentinel",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sentinel"),a("OutboundLink")],1),e._v(" for Android and "),a("a",{attrs:{href:"https://itunes.apple.com/us/app/bitwallet-bitcoin-wallet/id777634714",target:"_blank",rel:"noopener noreferrer"}},[e._v("bitWallet"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"https://itunes.apple.com/ca/app/arcbit-bitcoin-wallet/id999487888",target:"_blank",rel:"noopener noreferrer"}},[e._v("ArcBit"),a("OutboundLink")],1),e._v(" for iOS. Watch-only wallets allow xpub import and don't require the private key.")]),e._v(" "),a("h2",{attrs:{id:"what-is-a-derivation-scheme"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-a-derivation-scheme"}},[e._v("#")]),e._v(" What is a derivation scheme?")]),e._v(" "),a("p",[e._v("In order to receive payments to your BTCPay, you need to connect a wallet in your Store Settings by providing an xpubkey generated by your own wallet software. BTCPay uses what is called a "),a("code",[e._v("derivation scheme")]),e._v(" to represent the destination of the funds received by your invoices. The destination of those funds will be your wallet, located by the xpubkey that you provide.")]),e._v(" "),a("p",[e._v("Using different derivation schemes with your xpub, you can also choose to create various receiving address types, shown in your store invoices.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[e._v("Address Type")]),e._v(" "),a("th",{staticStyle:{"text-align":"center"}},[e._v("Example")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("P2WPKH")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("xpub...")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("P2SH-P2WPKH")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("xpub...-[p2sh]")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("P2PKH")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("xpub...-[legacy]")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Multi-sig P2WSH")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("2-of-xpub1...-xpub2...")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Multi-sig P2SH-P2WSH")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("2-of-xpub1...-xpub2...-[p2sh]")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Multi-sig P2SH")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("2-of-xpub1...-xpub2...-[legacy]")])])])])])}),[],!1,null,null,null);t.default=o.exports}}]);